// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

// Пример моделей
model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  posts     Post[]

  @@map("users")
}

model Post {
  id        Int      @id @default(autoincrement())
  title     String
  content   String?
  published Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  authorId  Int
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)

  @@map("posts")
}

model Patient {
  id          Int      @id @default(autoincrement())
  firstName   String
  lastName    String
  middleName  String?
  dateOfBirth DateTime
  gender      String
  phone       String
  email       String?
  address     String
  city        String
  postalCode  String?
  emergencyContact String?
  emergencyPhone   String?
  medicalHistory   String?
  allergies        String?
  medications      String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  consultations Consultation[]

  @@map("patients")
}

model Consultation {
  id          Int      @id @default(autoincrement())
  patientName String
  age         Int
  gender      String
  phone       String
  height      Int      // в см
  weight      Int      // в кг
  bmi         Float    @default(0.0)
  bmiStatus   String   @default("")
  complaints  String?
  // Обстеження
  hasOglad    Boolean  @default(false)
  hasAnalizi  Boolean  @default(false)
  hasEkg      Boolean  @default(false)
  hasRentgen  Boolean  @default(false)
  hasUzi      Boolean  @default(false)
  hasKt       Boolean  @default(false)
  hasMrt      Boolean  @default(false)
  // Медична історія
  hasChronicDiseases Boolean @default(false)
  takesMedications   Boolean @default(false)
  painLevel         Int     @default(0)
  hasAllergies      Boolean @default(false)
  // Додаткові коментарі
  additionalComments String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  patientId   Int?
  patient     Patient? @relation(fields: [patientId], references: [id], onDelete: SetNull)

  @@map("consultations")
}
