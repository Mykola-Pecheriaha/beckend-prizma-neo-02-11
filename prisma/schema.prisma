generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  posts     Post[]

  @@map("users")
}

model Post {
  id        Int      @id @default(autoincrement())
  title     String
  content   String?
  published Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  authorId  Int
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)

  @@map("posts")
}

model Patient {
  id               Int            @id @default(autoincrement())
  firstName        String
  lastName         String
  middleName       String?
  dateOfBirth      DateTime
  gender           String
  phone            String
  email            String?
  address          String
  city             String
  postalCode       String?
  emergencyContact String?
  emergencyPhone   String?
  medicalHistory   String?
  allergies        String?
  medications      String?
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  consultations    Consultation[]

  @@map("patients")
}

model Consultation {
  id                 Int      @id @default(autoincrement())
  patientName        String
  age                Int
  gender             String
  phone              String
  height             Int
  weight             Int
  bmi                Float    @default(0.0)
  bmiStatus          String   @default("")
  complaints         String?
  hasOglad           Boolean  @default(false)
  hasAnalizi         Boolean  @default(false)
  hasEkg             Boolean  @default(false)
  hasRentgen         Boolean  @default(false)
  hasUzi             Boolean  @default(false)
  hasKt              Boolean  @default(false)
  hasMrt             Boolean  @default(false)
  hasChronicDiseases Boolean  @default(false)
  takesMedications   Boolean  @default(false)
  painLevel          Int      @default(0)
  hasAllergies       Boolean  @default(false)
  additionalComments String?
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  patientId          Int?
  patient            Patient? @relation(fields: [patientId], references: [id])

  @@map("consultations")
}
